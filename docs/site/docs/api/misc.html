

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Miscellaneous Methods &mdash; The Apache CouchDB Documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="The Apache CouchDB Documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="reference.html" />
    <link rel="next" title="Local (non-replicating) Document Methods" href="local.html" />
    <link rel="prev" title="Design Document Methods" href="design.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>The Apache CouchDB Documentation</span></a></h1>
        <h2 class="heading"><span>Miscellaneous Methods</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="design.html">Design Document Methods</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="local.html">Local (non-replicating) Document Methods</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="miscellaneous-methods">
<span id="api-misc"></span><h1>Miscellaneous Methods<a class="headerlink" href="#miscellaneous-methods" title="Permalink to this headline">¶</a></h1>
<p>The CouchDB Miscellaneous interface provides the basic interface to a
CouchDB server for obtaining CouchDB information and getting and setting
configuration information.</p>
<p>A list of the available methods and URL paths are provided below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="33%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Path</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>/</td>
<td>Get the welcome message and version
information</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/_active_tasks</td>
<td>Obtain a list of the tasks running in the
server</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/_all_dbs</td>
<td>Get a list of all the DBs</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/_log</td>
<td>Return the server log file</td>
</tr>
<tr class="row-even"><td>POST</td>
<td>/_replicate</td>
<td>Set or cancel replication</td>
</tr>
<tr class="row-odd"><td>POST</td>
<td>/_restart</td>
<td>Restart the server</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/_stats</td>
<td>Return server statistics</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/_utils</td>
<td>CouchDB administration interface (Futon)</td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/_uuids</td>
<td>Get generated UUIDs from the server</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/favicon.ico</td>
<td>Get the site icon</td>
</tr>
</tbody>
</table>
<div class="section" id="get">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/</span></tt><a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: Welcome message and version</li>
<li><strong>Admin Privileges Required</strong>: no</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>Accessing the root of a CouchDB instance returns meta information about
the instance. The response is a JSON structure containing information
about the server, including a welcome message and the version of the
server.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;couchdb&quot;</span> <span class="o">:</span> <span class="s2">&quot;Welcome&quot;</span><span class="p">,</span>
   <span class="s2">&quot;version&quot;</span> <span class="o">:</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="get-active-tasks">
<span id="active-tasks"></span><h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_active_tasks</span></tt><a class="headerlink" href="#get-active-tasks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_active_tasks</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: List of running tasks, including the task type, name, status
and process ID</li>
<li><strong>Admin Privileges Required</strong>: yes</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>You can obtain a list of active tasks by using the <tt class="docutils literal"><span class="pre">/_active_tasks</span></tt>
URL. The result is a JSON array of the currently running tasks, with
each task being described with a single object. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
   <span class="p">{</span>
    <span class="s2">&quot;pid&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;0.11599.0&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span> <span class="o">:</span> <span class="s2">&quot;Copied 0 of 18369 changes (0%)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;task&quot;</span> <span class="o">:</span> <span class="s2">&quot;recipes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;Database Compaction&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The returned structure includes the following fields for each task:</p>
<ul class="simple">
<li><strong>tasks</strong> [array]: Active Task<ul>
<li><strong>pid</strong>:Process ID</li>
<li><strong>status</strong>: Task status message</li>
<li><strong>task</strong>: Task name</li>
<li><strong>type</strong>: Operation Type</li>
</ul>
</li>
</ul>
<p>For operation type, valid values include:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Database</span> <span class="pre">Compaction</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Replication</span></tt></li>
<li><tt class="docutils literal"><span class="pre">View</span> <span class="pre">Group</span> <span class="pre">Compaction</span></tt></li>
<li><tt class="docutils literal"><span class="pre">View</span> <span class="pre">Group</span> <span class="pre">Indexer</span></tt></li>
</ul>
</div>
<div class="section" id="get-all-dbs">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_all_dbs</span></tt><a class="headerlink" href="#get-all-dbs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_all_dbs</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: JSON list of DBs</li>
<li><strong>Admin Privileges Required</strong>: no</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>Returns a list of all the databases in the CouchDB instance. For
example:</p>
<div class="highlight-http"><pre>GET http://couchdb:5984/_all_dbs
Accept: application/json</pre>
</div>
<p>The return is a JSON array:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
   <span class="s2">&quot;_users&quot;</span><span class="p">,</span>
   <span class="s2">&quot;contacts&quot;</span><span class="p">,</span>
   <span class="s2">&quot;docs&quot;</span><span class="p">,</span>
   <span class="s2">&quot;invoices&quot;</span><span class="p">,</span>
   <span class="s2">&quot;locations&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-log">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_log</span></tt><a class="headerlink" href="#get-log" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_log</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: Log content</li>
<li><strong>Admin Privileges Required</strong>: yes</li>
<li><strong>Query Arguments</strong>:<ul>
<li><strong>Argument</strong>: bytes<ul>
<li><strong>Description</strong>:  Bytes to be returned</li>
<li><strong>Optional</strong>: yes</li>
<li><strong>Type</strong>: numeric</li>
<li><strong>Default</strong>: 1000</li>
</ul>
</li>
<li><strong>Argument</strong>: offset<ul>
<li><strong>Description</strong>:  Offset in bytes where the log tail should be started</li>
<li><strong>Optional</strong>: yes</li>
<li><strong>Type</strong>: numeric</li>
<li><strong>Default</strong>: 0</li>
</ul>
</li>
</ul>
</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>Gets the CouchDB log, equivalent to accessing the local log file of the
corresponding CouchDB instance.</p>
<p>When you request the log, the response is returned as plain (UTF-8)
text, with an HTTP <tt class="docutils literal"><span class="pre">Content-type</span></tt> header as <tt class="docutils literal"><span class="pre">text/plain</span></tt>.</p>
<p>For example, the request:</p>
<div class="highlight-http"><pre>GET http://couchdb:5984/_log
Accept: */*</pre>
</div>
<p>The raw text is returned:</p>
<div class="highlight-text"><div class="highlight"><pre>[Wed, 27 Oct 2010 10:49:42 GMT] [info] [&lt;0.23338.2&gt;] 192.168.0.2 - - &#39;PUT&#39; /authdb 401
[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.23428.2&gt;] 192.168.0.116 - - &#39;GET&#39; /recipes/FishStew 200
[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.23428.2&gt;] 192.168.0.116 - - &#39;GET&#39; /_session 200
[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.24199.2&gt;] 192.168.0.116 - - &#39;GET&#39; / 200
[Wed, 27 Oct 2010 13:03:38 GMT] [info] [&lt;0.24207.2&gt;] 192.168.0.116 - - &#39;GET&#39; /_log?offset=5 200
</pre></div>
</div>
<p>If you want to pick out specific parts of the log information you can
use the <tt class="docutils literal"><span class="pre">bytes</span></tt> argument, which specifies the number of bytes to be
returned, and <tt class="docutils literal"><span class="pre">offset</span></tt>, which specifies where the reading of the log
should start, counted back from the end. For example, if you use the
following request:</p>
<div class="highlight-http"><pre>GET /_log?bytes=500&amp;offset=2000</pre>
</div>
<p>Reading of the log will start at 2000 bytes from the end of the log, and
500 bytes will be shown.</p>
</div>
<div class="section" id="post-replicate">
<span id="replicate"></span><h2><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">/_replicate</span></tt><a class="headerlink" href="#post-replicate" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">POST</span> <span class="pre">/_replicate</span></tt></li>
<li><strong>Request</strong>: Replication specification</li>
<li><strong>Response</strong>: TBD</li>
<li><strong>Admin Privileges Required</strong>: yes</li>
<li><strong>Query Arguments</strong>:<ul>
<li><strong>Argument</strong>: bytes<ul>
<li><strong>Description</strong>:  Bytes to be returned</li>
<li><strong>Optional</strong>: yes</li>
<li><strong>Type</strong>: numeric</li>
<li><strong>Default</strong>: 1000</li>
</ul>
</li>
<li><strong>Argument</strong>: offset<ul>
<li><strong>Description</strong>:  Offset in bytes where the log tail should be started</li>
<li><strong>Optional</strong>: yes</li>
<li><strong>Type</strong>: numeric</li>
<li><strong>Default</strong>: 0</li>
</ul>
</li>
</ul>
</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Replication request successfully completed</li>
<li><strong>202</strong>:
Continuous replication request has been accepted</li>
<li><strong>404</strong>:
Either the source or target DB is not found</li>
<li><strong>500</strong>:
JSON specification was invalid</li>
</ul>
</li>
</ul>
<p>Request, configure, or stop, a replication operation.</p>
<p>The specification of the replication request is controlled through the
JSON content of the request. The JSON should be an object with the
fields defining the source, target and other options. The fields of the
JSON request are shown in the table below:</p>
<ul class="simple">
<li><strong>cancel (optional)</strong>:  Cancels the replication</li>
<li><strong>continuous (optional)</strong>:  Configure the replication to be continuous</li>
<li><strong>create_target (optional)</strong>:  Creates the target database</li>
<li><strong>doc_ids (optional)</strong>:  Array of document IDs to be synchronized</li>
<li><strong>proxy (optional)</strong>:  Address of a proxy server through which replication
should occur</li>
<li><strong>source</strong>:  Source database name or URL</li>
<li><strong>target</strong>:  Target database name or URL</li>
</ul>
<div class="section" id="replication-operation">
<h3>Replication Operation<a class="headerlink" href="#replication-operation" title="Permalink to this headline">¶</a></h3>
<p>The aim of the replication is that at the end of the process, all active
documents on the source database are also in the destination database
and all documents that were deleted in the source databases are also
deleted (if they exist) on the destination database.</p>
<p>Replication can be described as either push or pull replication:</p>
<ul>
<li><p class="first"><em>Pull replication</em> is where the <tt class="docutils literal"><span class="pre">source</span></tt> is the remote CouchDB
instance, and the <tt class="docutils literal"><span class="pre">destination</span></tt> is the local database.</p>
<p>Pull replication is the most useful solution to use if your source
database has a permanent IP address, and your destination (local)
database may have a dynamically assigned IP address (for example,
through DHCP). This is particularly important if you are replicating
to a mobile or other device from a central server.</p>
</li>
<li><p class="first"><em>Push replication</em> is where the <tt class="docutils literal"><span class="pre">source</span></tt> is a local database, and
<tt class="docutils literal"><span class="pre">destination</span></tt> is a remote database.</p>
</li>
</ul>
</div>
<div class="section" id="specifying-the-source-and-target-database">
<h3>Specifying the Source and Target Database<a class="headerlink" href="#specifying-the-source-and-target-database" title="Permalink to this headline">¶</a></h3>
<p>You must use the URL specification of the CouchDB database if you want
to perform replication in either of the following two situations:</p>
<ul class="simple">
<li>Replication with a remote database (i.e. another instance of CouchDB
on the same host, or a different host)</li>
<li>Replication with a database that requires authentication</li>
</ul>
<p>For example, to request replication between a database local to the
CouchDB instance to which you send the request, and a remote database
you might use the following request:</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "http://coucdb-remote:5984/recipes",
}</pre>
</div>
<p>In all cases, the requested databases in the <tt class="docutils literal"><span class="pre">source</span></tt> and <tt class="docutils literal"><span class="pre">target</span></tt>
specification must exist. If they do not, an error will be returned
within the JSON object:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;error&quot;</span> <span class="o">:</span> <span class="s2">&quot;db_not_found&quot;</span>
   <span class="s2">&quot;reason&quot;</span> <span class="o">:</span> <span class="s2">&quot;could not open http://couchdb-remote:5984/ol1ka/&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can create the target database (providing your user credentials
allow it) by adding the <tt class="docutils literal"><span class="pre">create_target</span></tt> field to the request object:</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "create_target" : true
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
}</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">create_target</span></tt> field is not destructive. If the database already
exists, the replication proceeds as normal.</p>
</div>
<div class="section" id="single-replication">
<h3>Single Replication<a class="headerlink" href="#single-replication" title="Permalink to this headline">¶</a></h3>
<p>You can request replication of a database so that the two databases can
be synchronized. By default, the replication process occurs one time and
synchronizes the two databases together. For example, you can request a
single synchronization between two databases by supplying the <tt class="docutils literal"><span class="pre">source</span></tt>
and <tt class="docutils literal"><span class="pre">target</span></tt> fields within the request JSON content.</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "recipes-snapshot",
}</pre>
</div>
<p>In the above example, the databases <tt class="docutils literal"><span class="pre">recipes</span></tt> and <tt class="docutils literal"><span class="pre">recipes-snapshot</span></tt>
will be synchronized. These databases are local to the CouchDB instance
where the request was made. The response will be a JSON structure
containing the success (or failure) of the synchronization process, and
statistics about the process:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;ok&quot;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
   <span class="s2">&quot;history&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;docs_read&quot;</span> <span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
         <span class="s2">&quot;session_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;52c2370f5027043d286daca4de247db0&quot;</span><span class="p">,</span>
         <span class="s2">&quot;recorded_seq&quot;</span> <span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
         <span class="s2">&quot;end_last_seq&quot;</span> <span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
         <span class="s2">&quot;doc_write_failures&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;start_time&quot;</span> <span class="o">:</span> <span class="s2">&quot;Thu, 28 Oct 2010 10:24:13 GMT&quot;</span><span class="p">,</span>
         <span class="s2">&quot;start_last_seq&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;end_time&quot;</span> <span class="o">:</span> <span class="s2">&quot;Thu, 28 Oct 2010 10:24:14 GMT&quot;</span><span class="p">,</span>
         <span class="s2">&quot;missing_checked&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;docs_written&quot;</span> <span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
         <span class="s2">&quot;missing_found&quot;</span> <span class="o">:</span> <span class="mi">1000</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;session_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;52c2370f5027043d286daca4de247db0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;source_last_seq&quot;</span> <span class="o">:</span> <span class="mi">1000</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The structure defines the replication status, as described in the table
below:</p>
<ul class="simple">
<li><strong>history [array]</strong>:  Replication History<ul>
<li><strong>doc_write_failures</strong>:  Number of document write failures</li>
<li><strong>docs_read</strong>:  Number of documents read</li>
<li><strong>docs_written</strong>:  Number of documents written to target</li>
<li><strong>end_last_seq</strong>:  Last sequence number in changes stream</li>
<li><strong>end_time</strong>:  Date/Time replication operation completed</li>
<li><strong>missing_checked</strong>:  Number of missing documents checked</li>
<li><strong>missing_found</strong>:  Number of missing documents found</li>
<li><strong>recorded_seq</strong>:  Last recorded sequence number</li>
<li><strong>session_id</strong>:  Session ID for this replication operation</li>
<li><strong>start_last_seq</strong>:  First sequence number in changes stream</li>
<li><strong>start_time</strong>:  Date/Time replication operation started</li>
</ul>
</li>
<li><strong>ok</strong>:  Replication status</li>
<li><strong>session_id</strong>:  Unique session ID</li>
<li><strong>source_last_seq</strong>:  Last sequence number read from source database</li>
</ul>
</div>
<div class="section" id="continuous-replication">
<h3>Continuous Replication<a class="headerlink" href="#continuous-replication" title="Permalink to this headline">¶</a></h3>
<p>Synchronization of a database with the previously noted methods happens
only once, at the time the replicate request is made. To have the target
database permanently replicated from the source, you must set the
<tt class="docutils literal"><span class="pre">continuous</span></tt> field of the JSON object within the request to true.</p>
<p>With continuous replication changes in the source database are
replicated to the target database in perpetuity until you specifically
request that replication ceases.</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "continuous" : true
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
}</pre>
</div>
<p>Changes will be replicated between the two databases as long as a
network connection is available between the two instances.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Two keep two databases synchronized with each other, you need to set
replication in both directions; that is, you must replicate from
<tt class="docutils literal"><span class="pre">databasea</span></tt> to <tt class="docutils literal"><span class="pre">databaseb</span></tt>, and separately from <tt class="docutils literal"><span class="pre">databaseb</span></tt> to
<tt class="docutils literal"><span class="pre">databasea</span></tt>.</p>
</div>
</div>
<div class="section" id="canceling-continuous-replication">
<h3>Canceling Continuous Replication<a class="headerlink" href="#canceling-continuous-replication" title="Permalink to this headline">¶</a></h3>
<p>You can cancel continuous replication by adding the <tt class="docutils literal"><span class="pre">cancel</span></tt> field to
the JSON request object and setting the value to true. Note that the
structure of the request must be identical to the original for the
cancellation request to be honoured. For example, if you requested
continuous replication, the cancellation request must also contain the
<tt class="docutils literal"><span class="pre">continuous</span></tt> field.</p>
<p>For example, the replication request:</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
   "create_target" : true,
   "continuous" : true
}</pre>
</div>
<p>Must be canceled using the request:</p>
<div class="highlight-http"><pre>POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
    "cancel" : true,
    "continuous" : true
    "create_target" : true,
    "source" : "recipes",
    "target" : "http://couchdb-remote:5984/recipes",
}</pre>
</div>
<p>Requesting cancellation of a replication that does not exist results in
a 404 error.</p>
</div>
</div>
<div class="section" id="post-restart">
<h2><tt class="docutils literal"><span class="pre">POST</span> <span class="pre">/_restart</span></tt><a class="headerlink" href="#post-restart" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">POST</span> <span class="pre">/_restart</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: JSON status message</li>
<li><strong>Admin Privileges Required</strong>: yes</li>
<li><strong>HTTP Headers</strong>:<ul>
<li><strong>Header</strong>: <tt class="docutils literal"><span class="pre">Content-Type</span></tt><ul>
<li><strong>Description</strong>: Request content type</li>
<li><strong>Optional</strong>: no</li>
<li><strong>Value</strong>: <em class="mimetype">application/json</em></li>
</ul>
</li>
</ul>
</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Replication request successfully completed</li>
</ul>
</li>
</ul>
<p>Restarts the CouchDB instance. You must be authenticated as a user with
administration privileges for this to work.</p>
<p>For example:</p>
<div class="highlight-http"><pre>POST http://admin:password@couchdb:5984/_restart</pre>
</div>
<p>The return value (if the server has not already restarted) is a JSON
status object indicating that the request has been received:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;ok&quot;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the server has already restarted, the header may be returned, but no
actual data is contained in the response.</p>
</div>
<div class="section" id="get-stats">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_stats</span></tt><a class="headerlink" href="#get-stats" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_stats</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: Server statistics</li>
<li><strong>Admin Privileges Required</strong>: no</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">_stats</span></tt> method returns a JSON object containing the statistics
for the running server. The object is structured with top-level sections
collating the statistics for a range of entries, with each individual
statistic being easily identified, and the content of each statistic is
self-describing. For example, the request time statistics, within the
<tt class="docutils literal"><span class="pre">couchdb</span></tt> section are structured as follows:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;couchdb&quot;</span> <span class="o">:</span> <span class="p">{</span>
<span class="p">...</span>
      <span class="s2">&quot;request_time&quot;</span> <span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;stddev&quot;</span> <span class="o">:</span> <span class="s2">&quot;27.509&quot;</span><span class="p">,</span>
         <span class="s2">&quot;min&quot;</span> <span class="o">:</span> <span class="s2">&quot;0.333333333333333&quot;</span><span class="p">,</span>
         <span class="s2">&quot;max&quot;</span> <span class="o">:</span> <span class="s2">&quot;152&quot;</span><span class="p">,</span>
         <span class="s2">&quot;current&quot;</span> <span class="o">:</span> <span class="s2">&quot;400.976&quot;</span><span class="p">,</span>
         <span class="s2">&quot;mean&quot;</span> <span class="o">:</span> <span class="s2">&quot;10.837&quot;</span><span class="p">,</span>
         <span class="s2">&quot;sum&quot;</span> <span class="o">:</span> <span class="s2">&quot;400.976&quot;</span><span class="p">,</span>
         <span class="s2">&quot;description&quot;</span> <span class="o">:</span> <span class="s2">&quot;length of a request inside CouchDB without MochiWeb&quot;</span>
      <span class="p">},</span>
<span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The fields provide the current, minimum and maximum, and a collection of
statistical means and quantities. The quantity in each case is not
defined, but the descriptions below provide</p>
<p>The statistics are divided into the following top-level sections:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">couchdb</span></tt>: Describes statistics specific to the internals of CouchDB.</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="57%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">Statistic ID</p>
</th>
<th class="head"><p class="first last">Description</p>
</th>
<th class="head"><p class="first last">Unit</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">auth_cache_hits</span></tt></p>
</td>
<td><p class="first last">Number of authentication cache hits</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">auth_cache_misses</span></tt></p>
</td>
<td><p class="first last">Number of authentication cache misses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">database_reads</span></tt></p>
</td>
<td><p class="first last">Number of times a document was read from a database</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">database_writes</span></tt></p>
</td>
<td><p class="first last">Number of times a database was changed</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">open_databases</span></tt></p>
</td>
<td><p class="first last">Number of open databases</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">open_os_files</span></tt></p>
</td>
<td><p class="first last">Number of file descriptors CouchDB has open</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">request_time</span></tt></p>
</td>
<td><p class="first last">Length of a request inside CouchDB without MochiWeb</p>
</td>
<td><p class="first last">milliseconds</p>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">httpd_request_methods</span></tt></p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="57%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">Statistic ID</p>
</th>
<th class="head"><p class="first last">Description</p>
</th>
<th class="head"><p class="first last">Unit</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">COPY</span></tt></p>
</td>
<td><p class="first last">Number of HTTP COPY requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">DELETE</span></tt></p>
</td>
<td><p class="first last">Number of HTTP DELETE requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">GET</span></tt></p>
</td>
<td><p class="first last">Number of HTTP GET requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">HEAD</span></tt></p>
</td>
<td><p class="first last">Number of HTTP HEAD requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">POST</span></tt></p>
</td>
<td><p class="first last">Number of HTTP POST requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">PUT</span></tt></p>
</td>
<td><p class="first last">Number of HTTP PUT requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">httpd_status_codes</span></tt></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="68%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">Statistic ID</p>
</th>
<th class="head"><p class="first last">Description</p>
</th>
<th class="head"><p class="first last">Unit</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">200</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 200 OK responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">201</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 201 Created responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">202</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 202 Accepted responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">301</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 301 Moved Permanently responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">304</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 304 Not Modified responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">400</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 400 Bad Request responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">401</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 401 Unauthorized responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">403</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 403 Forbidden responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">404</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 404 Not Found responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">405</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 405 Method Not Allowed responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">409</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 409 Conflict responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">412</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 412 Precondition Failed responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">500</span></tt></p>
</td>
<td><p class="first last">Number of HTTP 500 Internal Server Error responses</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">httpd</span></tt></p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="51%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">Statistic ID</p>
</th>
<th class="head"><p class="first last">Description</p>
</th>
<th class="head"><p class="first last">Unit</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">bulk_requests</span></tt></p>
</td>
<td><p class="first last">Number of bulk requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">clients_requesting_changes</span></tt></p>
</td>
<td><p class="first last">Number of clients for continuous _changes</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">requests</span></tt></p>
</td>
<td><p class="first last">Number of HTTP requests</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-odd"><td><p class="first last"><tt class="docutils literal"><span class="pre">temporary_view_reads</span></tt></p>
</td>
<td><p class="first last">Number of temporary view reads</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
<tr class="row-even"><td><p class="first last"><tt class="docutils literal"><span class="pre">view_reads</span></tt></p>
</td>
<td><p class="first last">Number of view reads</p>
</td>
<td><p class="first last">number</p>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>You can also access individual statistics by quoting the statistics
sections and statistic ID as part of the URL path. For example, to get
the <tt class="docutils literal"><span class="pre">request_time</span></tt> statistics, you can use:</p>
<div class="highlight-http"><pre>GET /_stats/couchdb/request_time</pre>
</div>
<p>This returns an entire statistics object, as with the full request, but
containing only the request individual statistic. Hence, the returned
structure is as follows:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;couchdb&quot;</span> <span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;request_time&quot;</span> <span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;stddev&quot;</span> <span class="o">:</span> <span class="mf">7454.305</span><span class="p">,</span>
         <span class="s2">&quot;min&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;max&quot;</span> <span class="o">:</span> <span class="mi">34185</span><span class="p">,</span>
         <span class="s2">&quot;current&quot;</span> <span class="o">:</span> <span class="mf">34697.803</span><span class="p">,</span>
         <span class="s2">&quot;mean&quot;</span> <span class="o">:</span> <span class="mf">1652.276</span><span class="p">,</span>
         <span class="s2">&quot;sum&quot;</span> <span class="o">:</span> <span class="mf">34697.803</span><span class="p">,</span>
         <span class="s2">&quot;description&quot;</span> <span class="o">:</span> <span class="s2">&quot;length of a request inside CouchDB without MochiWeb&quot;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="get-utils">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_utils</span></tt><a class="headerlink" href="#get-utils" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_utils</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: Administration interface</li>
<li><strong>Admin Privileges Required</strong>: no</li>
</ul>
<p>Accesses the built-in Futon administration interface for CouchDB.</p>
</div>
<div class="section" id="get-uuids">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_uuids</span></tt><a class="headerlink" href="#get-uuids" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/_uuids</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: List of UUIDs</li>
<li><strong>Admin Privileges Required</strong>: no</li>
<li><strong>Query Arguments</strong>:<ul>
<li><strong>Argument</strong>: count<ul>
<li><strong>Description</strong>:  Number of UUIDs to return</li>
<li><strong>Optional</strong>: yes</li>
<li><strong>Type</strong>: numeric</li>
</ul>
</li>
</ul>
</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
</ul>
</li>
</ul>
<p>Requests one or more Universally Unique Identifiers (UUIDs) from the
CouchDB instance. The response is a JSON object providing a list of
UUIDs. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;uuids&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;7e4b5a14b22ec1cf8e58b9cdd0000da3&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can use the <tt class="docutils literal"><span class="pre">count</span></tt> argument to specify the number of UUIDs to be
returned. For example:</p>
<div class="highlight-http"><pre>GET http://couchdb:5984/_uuids?count=5</pre>
</div>
<p>Returns:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;uuids&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;c9df0cdf4442f993fc5570225b405a80&quot;</span><span class="p">,</span>
      <span class="s2">&quot;c9df0cdf4442f993fc5570225b405bd2&quot;</span><span class="p">,</span>
      <span class="s2">&quot;c9df0cdf4442f993fc5570225b405e42&quot;</span><span class="p">,</span>
      <span class="s2">&quot;c9df0cdf4442f993fc5570225b4061a0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;c9df0cdf4442f993fc5570225b406a20&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The UUID type is determined by the UUID type setting in the CouchDB
configuration. See <a class="reference internal" href="configuration.html#api-put-config"><em>PUT /_config/section/key</em></a>.</p>
<p>For example, changing the UUID type to <tt class="docutils literal"><span class="pre">random</span></tt>:</p>
<div class="highlight-http"><pre>PUT http://couchdb:5984/_config/uuids/algorithm
Content-Type: application/json
Accept: */*

"random"</pre>
</div>
<p>When obtaining a list of UUIDs:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;uuids&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="s2">&quot;031aad7b469956cf2826fcb2a9260492&quot;</span><span class="p">,</span>
      <span class="s2">&quot;6ec875e15e6b385120938df18ee8e496&quot;</span><span class="p">,</span>
      <span class="s2">&quot;cff9e881516483911aa2f0e98949092d&quot;</span><span class="p">,</span>
      <span class="s2">&quot;b89d37509d39dd712546f9510d4a9271&quot;</span><span class="p">,</span>
      <span class="s2">&quot;2e0dbf7f6c4ad716f21938a016e4e59f&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="get-favicon-ico">
<h2><tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/favicon.ico</span></tt><a class="headerlink" href="#get-favicon-ico" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Method</strong>: <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">/favicon.ico</span></tt></li>
<li><strong>Request</strong>: None</li>
<li><strong>Response</strong>: Binary content for the <cite>favicon.ico</cite> site icon</li>
<li><strong>Admin Privileges Required</strong>: no</li>
<li><strong>Return Codes</strong>:<ul>
<li><strong>200</strong>:
Request completed successfully.</li>
<li><strong>404</strong>:
The requested content could not be found. The returned content will include
further information, as a JSON object, if available.</li>
</ul>
</li>
</ul>
<p>Returns the site icon. The return <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header is
<em class="mimetype">image/x-icon</em>, and the content stream is the image data.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="design.html">Design Document Methods</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="local.html">Local (non-replicating) Document Methods</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2012, The Apache Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>