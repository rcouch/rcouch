{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Alternative Apache CouchDB distribution","name":"Rcouch","body":"rcouch [![Build Status](https://secure.travis-ci.org/refuge/rcouch.png)](http://travis-ci.org/refuge/rcouch)\r\n------------------------------------------------------------------------------------------------------------\r\n\r\nrcouch is a static distribution of couchdb using rebar. It is an\r\nextraction of the refuge code to ease the distribution of couchdb.\r\n\r\nBased on the couchdb code it is tagged from time to time for stability\r\npurpose. At some point some supported branch may appear.\r\n\r\nRCouch differs from refuge by only focusing on Apache CouchDB. It won't\r\ncontain any of the refuge features like P2P nodes handling, ... .\r\nInternally we are using it to test couchdb and as an example on how to\r\nembed couchdb in your own applications.\r\n\r\nRCouch is brought you by the [Refuge project](http://refuge.io).\r\n\r\n## Features:\r\n\r\n- Apache CouchDB based\r\n- Geocouch integrated\r\n- rebar\r\n- relocatable\r\n- Fully opensource. All the sources are on refuge GIT repository\r\n  (http://github.com/refuge) under Apache License 2.\r\n\r\n## Requirements\r\n\r\n- OS supported: Linux, OSX, BSDs (windows support is coming)\r\n- Erlang R14\r\n- Curl\r\n- zip (during build)\r\n- ICU (if not built statically)\r\n- Latest version of [rebar](http://github.com/basho/rebar) installed on\r\n  your system.\r\n\r\n## Installation\r\n\r\nInstallation is pretty simple. Just run the command line:\r\n\r\n    $ make rel\r\n\r\nand it will generate a couch folder in rel/couch. This release is\r\nfully relocatable, so you can put it where you want on your system.\r\n\r\n\r\nTo create package for your system run `make package` . For now we build\r\npackages for OSX, Debian, Redhat & Solaris.\r\n\r\n## Build rcouchx\r\n\r\nrcouchx is a macosx interface for rcouch based on [the excellent\r\nwork](https://github.com/janl/couchdbx-app) of Jan:\r\n\r\n![screenshot of rcouchx](http://benoitc.im/vrac/rcouchx/Screen%20Shot%202012-04-20%20at%2011.55.48%20PM_thumb.png)\r\n\r\n\r\nTo build it, run the command line:\r\n\r\n    $ make rcouchx\r\n\r\nThen launch the `rcouchx.app` application.\r\n\r\n\r\n##Notes on building a truly distributable package\r\n\r\nThe package built above will still depend on some libraries from your\r\nsystem, so additional work has to be done to distribute it to\r\nolder/newer systems.\r\n\r\n1. CouchDB will depend on the ICU library version that was present in\r\n   your system at build time. To easily bundle this library with the\r\n   package, build with:\r\n\r\n         $ make rel USE_STATIC_ICU=1\r\n\r\n1. Check whether your package depends on Ncurses:\r\n\r\n         $ ldd ./rel/rcouch/erts-*/bin/erlexec|grep ncurses\r\n\r\n    If it does, copy the .so file to ./rel/myapp/lib/ or rebuild Erlang\r\n    without this dependency.\r\n\r\n1. Decide whether you need SSL support in your package and check whether it\r\n   depends on OpenSSL:\r\n\r\n         $ ldd ./rel/rcouch/lib/ssl-*/priv/bin/ssl_esock|grep 'libcrypto\\|libssl'\r\n\r\n    If it does, copy the .so file to ./rel/rcouch/lib/ or rebuild Erlang\r\n    without this dependency.\r\n\r\nIf you copied any .so files in the last 2 steps, run this command, so\r\nthat your app can find the libraries:\r\n\r\n    $ sed -i '/^RUNNER_USER=/a\\\\nexport LD_LIBRARY_PATH=\"$RUNNER_BASE_DIR/lib\"' ./rel/rcouch/bin/rcouch\r\n\r\n\r\n## Binding port 80\r\n\r\nOn most UNIX systems binding port 80 is a privileged operation (requires\r\nroot). Running Erlang as root is not recommended so some configuration\r\nwill need to be done so that rcouch can bind port 80.\r\n\r\nIf you run a recent Linux kernel with capabilities you can give Erlang\r\nthe privilege using the setcap command (you may need to install a\r\npackage named lxc or similar to obtain this command).\r\n\r\n    $ setcap 'cap_net_bind_service=+ep' /path/to/rel/refuge/erts-5.8.5/bin/beam`\r\n    $ setcap 'cap_net_bind_service=+ep' /path/to/rel/refuge/erts-5.8.5/bin/beam.smp\r\n\r\nOn FreeBSD all ports can be made accessible to all users by issuing:\r\n\r\n$ sysctl net.inet.ip.portrange.reservedhigh=0","google":""}